var B=Object.defineProperty;var y=(s,e,t)=>e in s?B(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var m=(s,e,t)=>(y(s,typeof e!="symbol"?e+"":e,t),t);import{r as p,o as i,c as l,u as a,F as f,t as _,a as S,n as C,b as w,w as x,d as u,e as b,f as I,g as N,h as E}from"./vendor.37dd10fa.js";const L=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};L();const g=6,v=6,$=.2,A=!1,G=[[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1]],M=(s,e)=>s>=0&&s<g&&e<v&&e>=0,k=(s,e)=>G.map(([t,r])=>{const o=e.x+t,n=e.y+r;return M(o,n)&&s[o][n]||null}).filter(Boolean),O=["transparent","blue","green","yellow","orange","red","purple","pink","teal"];class P{constructor(e,t){m(this,"blockState",p({blocks:[],hasInitBombs:!1,bombs:0}));this.width=e,this.height=t,this.start()}start(){this.blockState.hasInitBombs=!1,this.blockState.blocks=Array.from({length:this.width},(e,t)=>Array.from({length:this.height},(r,o)=>({y:o,x:t,flag:!1,aroundBomb:0,isBomb:!1,isCovered:!0})))}generateBombs(e){this.blockState.blocks.flat().forEach(t=>{if(Math.abs(e.x-t.x)<=1&&Math.abs(e.y-t.y)<=1)return"";Math.random()<$&&(t.isBomb=!0,this.blockState.bombs=this.blockState.bombs+1)})}generateNumber(){this.blockState.blocks.flat().forEach(e=>{let t=0;k(this.blockState.blocks,e).forEach(r=>{r.isBomb&&(t=t+1)}),e.aroundBomb=t})}leftClickBlock(e){if(e.isBomb){this.watchGameState(!0);return}this.blockState.hasInitBombs||(console.log(this.blockState.hasInitBombs),this.generateBombs(e),this.generateNumber(),this.blockState.hasInitBombs=!0),this.coverBlock(e)}coverBlock(e){if(e.isCovered&&(this.blockState.blocks[e.x][e.y].isCovered=!1),e.aroundBomb||e.isBomb)return"";k(this.blockState.blocks,e).forEach(t=>{t.isCovered&&this.coverBlock(t)})}rightClickBlock(e){this.blockState.blocks[e.x][e.y].flag=!0}watchGameState(e){if(!this.blockState.hasInitBombs)return"";const t=[].concat(...this.blockState.blocks);t.every(r=>!r.isCovered||r.flag||e)&&(t.some(r=>r.isBomb)?(alert("lost"),t.forEach(r=>{r.isCovered=!1})):alert("win"))}}const D={key:0,class:"flag"},F={key:0,class:"bomb"},R={key:1},T={props:{block:{}},setup(s){const e=t=>{if(!t.isCovered)return{color:O[t.aroundBomb],backgroundColor:"#fff"}};return(t,r)=>(i(),l("div",{class:"block",style:C(e(s.block))},[s.block.flag&&s.block.isCovered?(i(),l("div",D)):!s.block.isCovered||a(A)?(i(),l(f,{key:1},[s.block.isBomb?(i(),l("div",F)):(i(),l("div",R,_(s.block.aroundBomb||""),1))],64)):S("",!0)],4))}};const V={class:"mines-sweeper"},q={class:"oper"},z=u("button",null," reset ",-1),K=[z],X={class:"mine"},Y={class:"raw"},j={setup(s){const e=new P(g,v),{blocks:t,bombs:r}=w(e.blockState);return x(()=>e.watchGameState()),(o,n)=>(i(),l("div",V,[u("div",q,[u("div",{onClick:n[0]||(n[0]=c=>a(e).start())},K),u("div",null,"\u70B8\u5F39\u6570:"+_(a(r)),1)]),u("div",X,[(i(!0),l(f,null,b(a(t),c=>(i(),l("div",Y,[(i(!0),l(f,null,b(c,h=>(i(),I(T,{block:h,onClick:d=>a(e).leftClickBlock(h),onContextmenu:N(d=>a(e).rightClickBlock(h),["right","prevent"]),onDblclick:d=>a(e).rightClickBlock(h)},null,8,["block","onClick","onContextmenu","onDblclick"]))),256))]))),256))])]))}};E(j).mount("#app");
